# Setting up a Vue app inside a WordPress theme

Splitting the code into multiple .vue files with single-file components will require the use of development tools like Webpack, Parcel, Vue CLI or Vite. This project uses the Vue CLI for this purpose. See [Configuration Reference](https://cli.vuejs.org/config/). The Vue app in this WordPress theme is build with Vue 3.

## 1. Install Node.js, Vue CLI and the Vue project

To use the Vue CLI, you will require Node.js installed on your system. Then, you need to open your systemâ€™s terminal and install the Vue CLI globally by running the following command.

```
npm install -g @vue/cli
```

Next step is to create the Vue project to your WordPress theme by using the command below.

```
vue create vue-project
```

## 2. Vue configurations

To make Vue work properly inside your WordPress theme, you need to add the following configurations to <b><i>vue.config.js</b></i> file.

```
const { defineConfig } = require('@vue/cli-service')
module.exports = defineConfig({
  filenameHashing: false,
  publicPath: '/wp-content/themes/your-wptheme/vue-project/dist',
  chainWebpack: config => {
    config.plugins.delete('html');
    config.plugins.delete('preload');
    config.plugins.delete('prefetch');
  },
  devServer: {
    devMiddleware: {
      writeToDisk: true,
    },
    hot: false,
  },
  css: {
    extract: true,
  },
  runtimeCompiler: true
})
```

## 3. Build the Vue project

To generate physical build files that you have to connect to your WordPress theme, you need to run the command below. By running this command, Vue generates inside the Vue project <b><i>dist</i></b> folder that will include the physical files.

```
npm run build
```

## 4. Connect physical Vue files to your WordPress theme

To let WordPress know about the Vue project, you have to enqueue the Vue bundle in WordPress. Add physical files generated by Vue to <b><i>functions.php</i></b> file according the instruction below. The physical files are <b><i>app.css</i></b>, <b><i>chunk-vendors.js</i></b> and <b><i>app.js</i></b> and they can be found from <b><i>dist</i></b> folder in the Vue project.

```
function essential_scripts() {
    wp_enqueue_style(
            'vue-cli-css',
            get_template_directory_uri() . '/vue-project/dist/css/app.css',
            [],
            '0.1.0'
        );

        wp_enqueue_script(
            'vue-cli-vendors',
            get_template_directory_uri() . '/vue-project/dist/js/chunk-vendors.js',
            [],
            '0.1.0',
            true
        );
        
        wp_enqueue_script(
            'vue-cli-app',
            get_template_directory_uri() . '/vue-project/dist/js/app.js',
            [],
            '0.1.0',
            true
        );
}

add_action('wp_enqueue_scripts', 'essential_scripts');
```

## 5. Informing Vue about the Mount Point in WordPress

Finally, to load the Vue project in WordPress, you need to tell Vue where to mount itself. This can be done by specifying the WordPress DOM element in <b><i>main.js</b></i> file of your Vue project. The following example allows to use reusable Vue components in DOM elements whose id is <i>app</i>.

```
import { createApp } from 'vue/dist/vue.esm-bundler';
import VueComponent1 from './components/VueComponent1.vue';
import VueComponent2 from './components/VueComponent2.vue';
import VueComponent3 from './components/VueComponent3.vue';

document.querySelectorAll('#app').forEach((el) => {
  createApp({
    components: 
       { VueComponent1, VueComponent2, VueComponent3 }
  }).mount(el);
});
```

## 6. Sending Vue data and functionalities from Vue components
If you are using Vue 3, you have to use <a href="https://vuejs.org/guide/components/slots.html#scoped-slots">Scoped Slots</a> to send data from Vue components to WordPress. The example below shows how to send data to WordPress via Vue component template by using Scoped Slots.


```
<script>
    export default {
        data() {
            return {
                dataState: 0,
            }
        },
        methods: {
            increaseFunc() {
                this.dataState++;
            }
        },
    };
</script>

<template>
    <div>
        <slot :dataState="dataState" :increaseFunc="increaseFunc"></slot>
    </div>
</template>
```
## 7. Receiving data from Vue components
To receive data from a Vue component, you need to define the mounting DOM element by adding <i>app</i> id. Inside that element you will need to use kebab-case and explicit closing tags for Vue components. To pass slot props, use v-slot directive directly on the Vue component tag. Put all data you want to receive from the Vue component to v-slot directive.

```
<div id="app">
    <vue-component1 v-slot="{ dataState, increaseFunc }">
        <h1> {{dataState}} </h1>
        <button v-on:click="increaseFunc"></button>
    </vue-component1>
</div>
```

## 8. Build your Vue project again 
Everytime you create or delete Vue components or make new configurations to your Vue project, you have to built your Vue project again by running the command below.

```
npm run build
```

## Using Vuex in your WordPress theme
To install Vuex, run the command below in your Vue project.
```
npm install vuex@next --save
```
Then, add store to <i><b>main.js</b></i> file according to the following example.

```
import { createApp } from 'vue/dist/vue.esm-bundler';
import { store } from './store/index';
import VueComponent1 from './components/VueComponent1.vue';
import VueComponent2 from './components/VueComponent2.vue';
import VueComponent3 from './components/VueComponent3.vue';

document.querySelectorAll('#app').forEach((el) => {
  createApp({
    components: 
       { VueComponent1, VueComponent2, VueComponent3 }
  }).use(store).mount(el);
});
```
Vuex generates to <i><b>src</b></i> folder a new folder, the name of which is <i><b>store</b></i>, with <i><b>index.js</b></i> file. The content of <i><b>index.js</b></i> file looks similiar to the example presented below.

```
import { createStore } from "vuex";

export const store = createStore({
    state() {
      return {
        dataState1: 0,
        dataState2: false,
      }
    }
  });
```

## Compiles and hot-reloads for development
You can always run the following command in your Vue project to check if the Vue project is running properly.
```
npm run serve
```





